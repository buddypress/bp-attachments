!function(){function e(e){return e&&e.__esModule?e.default:e}var t;t=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"bp/image-attachment","title":"Community Image","category":"media","icon":"image","description":"Insert an image from your personal media library.","keywords":["BuddyPress","community","image","img","picture","photo","media"],"textdomain":"bp-attachments","attributes":{"link":{"type":"string"}},"supports":{"align":false,"alignWide":false,"anchor":false,"className":false,"html":false},"editorScript":"file:./bp-attachments/js/blocks/image-attachment/index.js","style":"file:./bp-attachments/assets/blocks/image-attachment/index.css"}');const{components:{DropZone:a,FormFileUpload:n,Placeholder:o},data:{useDispatch:i,useSelect:s},element:{createElement:c},i18n:{__:l}}=wp;var r=e=>{let{type:t,icon:i,label:r,onUploadedMedium:m}=e;const{bpAttachments:{allowedExtByMediaList:p}}=s((e=>e("core/editor").getEditorSettings()),[]),d=p[t+"_playlist"]?p[t+"_playlist"]:p.album,u=e=>{let t;t=e.currentTarget&&e.currentTarget.files?[...e.currentTarget.files]:e;const a=t[0];m(a)};return c(o,{icon:i||"admin-media",label:r||l("Community Media","bp-attachments")},c(a,{onFilesDrop:e=>u(e),className:"uploader-inline"}),c(n,{onChange:e=>u(e),multiple:!1,accept:d,className:"components-button block-editor-media-placeholder__button block-editor-media-placeholder__upload-button is-primary"},l("Select a file","bp-attachments")))};const{apiFetch:m,blockEditor:{useBlockProps:p},data:{useSelect:d},element:{createElement:u},i18n:{__:b}}=wp;var h=e=>{let{attributes:t,setAttributes:a}=e;p();const n=d((e=>e("core").getCurrentUser()),[]);return u(r,{type:"image",icon:"format-image",label:b("Community Image","bp-attachments"),onUploadedMedium:e=>{const t=new FormData;t.append("file",e),t.append("action","bp_attachments_media_upload"),t.append("object","members"),t.append("object_item",n.id),t.append("status","public"),m({path:"buddypress/v1/attachments",method:"POST",body:t}).then((e=>{console.log(e)})).catch((e=>{console.log(e)})).finally((()=>{console.log("The end")}))}})};const{blocks:{registerBlockType:g},blockEditor:{useBlockProps:y},element:{createElement:f},i18n:{__:_}}=wp;g(e(t),{title:_("Community Image","bp-attachments"),description:_("Insert an image into your personal media library and use it for this content.","bp-attachments"),icon:{background:"#fff",foreground:"#d84800",src:"format-image"},category:"media",keywords:["BuddyPress",_("community","bp-attachments"),_("image","bp-attachments"),_("img","bp-attachments"),_("picture","bp-attachments"),_("photo","bp-attachments"),_("media","bp-attachments")],attributes:{link:{type:"string"}},supports:{align:!1,alignWide:!1,anchor:!1,className:!1,html:!1},edit:h})}();
//# sourceMappingURL=index.js.map
