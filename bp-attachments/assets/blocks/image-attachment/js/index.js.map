{"mappings":"mEAAAA,EAAiBC,KAAKC,MAAM,smBCG5B,MACCC,YAAYC,SACXA,EADWC,eAEXA,EAFWC,YAGXA,GAEDC,MAAMC,YACLA,EADKC,UAELA,GAEDC,SAASC,cACRA,GAEDC,MAAMC,GACLA,IAEEC,G,IAuDJC,EA5C8BC,IAA6B,IAA3BC,KAAEA,EAAFC,KAAQA,EAARC,MAAcA,GAAdH,EAC/B,MACCI,eAAeC,sBACdA,IAEGZ,GAAaa,GACVA,EAAQ,eAAgBC,qBAC7B,IACGC,EAAeH,EAAuBJ,EAAO,aAAgBI,EAAuBJ,EAAO,aAAgBI,EAAsBI,MAEjIC,EAAgBC,IACrB,IAAIC,EAGHA,EADID,EAAME,eAAiBF,EAAME,cAAcF,MACvC,IAAKA,EAAME,cAAcF,OAEzBA,EAIMC,EAAM,EAArB,EAGD,OACCE,EAACC,EADF,CAEEb,KAAUA,GAAc,cACxBC,MAAWA,GAAgBN,EAAI,kBAAmB,mBAElDiB,EAACE,EAJF,CAKEC,YAAgBN,GAAWD,EAAaC,GACxCO,UAAU,oBAEXJ,EAACK,EAJD,CAKCC,SAAaT,GAAWD,EAAaC,GACrCU,UAAW,EACXC,OAASd,EACTU,UAAU,qHAERrB,EAAI,gBAAiB,mBAf1B,EClDD,MACC0B,aAAaC,cACZA,GAED9B,SAASC,cACRA,GAEDC,MAAMC,GACLA,IAEEC,G,IAmBJ2B,EAZkBzB,IAAqC,IAAnC0B,WAAEA,EAAFC,cAAcA,GAAd3B,EACAwB,IAEnB,OACCI,EAAC7B,EADF,CAEEE,KAAK,QACLC,KAAK,eACLC,MAAQN,EAAI,kBAAmB,mBAJjC,ECpBD,MACCgC,QAAQC,kBACPA,GAEDP,aAAaC,cACZA,GAED9B,SAASC,cACRA,GAEDC,MAAMC,GACLA,IAEEC,GAQJgC,EAAmBC,KAAU,CAC5BC,MAAOnC,EAAI,kBAAmB,kBAC9BoC,YAAapC,EAAI,gFAAiF,kBAClGK,KAAM,CACLgC,WAAY,OACZC,WAAY,UACZC,IAAK,gBAENC,SAAU,QACVC,SAAU,CACT,aACAzC,EAAI,YAAa,kBACjBA,EAAI,QAAS,kBACbA,EAAI,MAAO,kBACXA,EAAI,UAAW,kBACfA,EAAI,QAAS,kBACbA,EAAI,QAAS,mBAEd6B,WAAY,CACXa,KAAM,CACLtC,KAAM,WAGRuC,SAAU,CACTC,OAAS,EACTC,WAAa,EACbC,QAAU,EACVzB,WAAa,EACb0B,MAAQ,GAETC,KAAMC,EACNC,KAAM,SAAA/C,GAA2B,IAAjB0B,WAAEA,GAAF1B,EACIwB,EAAcuB,OACjC,OAAO,I","sources":["src/blocks/image-attachment/block.json","src/blocks/common/components/attachment-placeholder.js","src/blocks/image-attachment/js/edit.js","src/blocks/image-attachment/js/index.js"],"sourcesContent":["{\n\t\"$schema\": \"https://schemas.wp.org/trunk/block.json\",\n\t\"apiVersion\": 2,\n\t\"name\": \"bp/image-attachment\",\n\t\"title\": \"Community Image\",\n\t\"category\": \"media\",\n\t\"icon\": \"image\",\n\t\"description\": \"Insert an image from your personal media library.\",\n\t\"keywords\": [ \"BuddyPress\", \"community\", \"image\", \"img\", \"picture\", \"photo\", \"media\" ],\n\t\"textdomain\": \"bp-attachments\",\n\t\"attributes\": {\n\t\t\"link\": {\n\t\t\t\"type\": \"string\"\n\t\t}\n\t},\n\t\"supports\": {\n\t\t\"align\": false,\n\t\t\"alignWide\": false,\n\t\t\"anchor\": false,\n\t\t\"className\": false,\n\t\t\"html\": false\n\t},\n\t\"editorScript\": \"file:./bp-attachments/js/blocks/image-attachment/index.js\",\n\t\"style\": \"file:./bp-attachments/assets/blocks/image-attachment/index.css\"\n}\n","/**\n * WordPress dependencies.\n */\nconst {\n\tcomponents: {\n\t\tDropZone,\n\t\tFormFileUpload,\n\t\tPlaceholder,\n\t},\n\tdata: {\n\t\tuseDispatch,\n\t\tuseSelect,\n\t},\n\telement: {\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * BP Attachments blocks placeholder to upload files.\n *\n * @since 1.0.0\n *\n * @param {string} type The allowed media type.\n * @param {string} icon The dashicon name.\n * @param {string} label The label to use.\n */\nconst AttachmentPlaceholder = ( { type, icon, label } ) => {\n\tconst {\n\t\tbpAttachments: {\n\t\t\tallowedExtByMediaList,\n\t\t},\n\t}  = useSelect( ( select ) => {\n\t\treturn select( 'core/editor' ).getEditorSettings();\n\t}, [] );\n\tconst allowedTypes = allowedExtByMediaList[ type + '_playlist' ] ? allowedExtByMediaList[ type + '_playlist' ] : allowedExtByMediaList.album;\n\n\tconst uploadMedia = ( files ) => {\n\t\tlet media;\n\n\t\tif ( files.currentTarget && files.currentTarget.files ) {\n\t\t\tmedia = [ ...files.currentTarget.files ];\n\t\t} else {\n\t\t\tmedia = files;\n\t\t}\n\n\t\t// Using only one medium.\n\t\tconst medium = media[0];\n\t}\n\n\treturn (\n\t\t<Placeholder\n\t\t\ticon={ !! icon ? icon : 'admin-media' }\n\t\t\tlabel={ !! label ? label : __( 'Community Media', 'bp-attachments' ) }\n\t\t>\n\t\t\t<DropZone\n\t\t\t\tonFilesDrop={ ( files ) => uploadMedia( files ) }\n\t\t\t\tclassName=\"uploader-inline\"\n\t\t\t/>\n\t\t\t<FormFileUpload\n\t\t\t\tonChange={ ( files ) => uploadMedia( files ) }\n\t\t\t\tmultiple={ false }\n\t\t\t\taccept={ allowedTypes }\n\t\t\t\tclassName=\"components-button block-editor-media-placeholder__button block-editor-media-placeholder__upload-button is-primary\"\n\t\t\t>\n\t\t\t\t{ __( 'Select a file', 'bp-attachments' ) }\n\t\t\t</FormFileUpload>\n\t\t</Placeholder>\n\t);\n};\n\nexport default AttachmentPlaceholder;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: {\n\t\tuseBlockProps,\n\t},\n\telement: {\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport AttachmentPlaceholder from '../../common/components/attachment-placeholder';\n\nconst editImage = ( { attributes, setAttributes } ) => {\n\tconst blockProps = useBlockProps();\n\n\treturn (\n\t\t<AttachmentPlaceholder\n\t\t\ttype=\"image\"\n\t\t\ticon=\"format-image\"\n\t\t\tlabel={ __( 'Community Image', 'bp-attachments' ) }\n\t\t/>\n\t);\n};\n\nexport default editImage;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tregisterBlockType,\n\t},\n\tblockEditor: {\n\t\tuseBlockProps,\n\t},\n\telement: {\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport metadata from '../block.json';\nimport editImage from './edit';\n\nregisterBlockType( metadata, {\n\ttitle: __( 'Community Image', 'bp-attachments' ),\n\tdescription: __( 'Insert an image into your personal media library and use it for this content.', 'bp-attachments' ),\n\ticon: {\n\t\tbackground: '#fff',\n\t\tforeground: '#d84800',\n\t\tsrc: 'format-image',\n\t},\n\tcategory: 'media',\n\tkeywords: [\n\t\t'BuddyPress',\n\t\t__( 'community', 'bp-attachments' ),\n\t\t__( 'image', 'bp-attachments' ),\n\t\t__( 'img', 'bp-attachments' ),\n\t\t__( 'picture', 'bp-attachments' ),\n\t\t__( 'photo', 'bp-attachments' ),\n\t\t__( 'media', 'bp-attachments' ),\n\t],\n\tattributes: {\n\t\tlink: {\n\t\t\ttype: 'string',\n\t\t}\n\t},\n\tsupports: {\n\t\t'align': false,\n\t\t'alignWide': false,\n\t\t'anchor': false,\n\t\t'className': false,\n\t\t'html': false,\n\t},\n\tedit: editImage,\n\tsave: function( { attributes } ) {\n\t\tconst blockProps = useBlockProps.save();\n\t\treturn null;\n\t}\n} );\n"],"names":["module","JSON","parse","components","DropZone","FormFileUpload","Placeholder","data","useDispatch","useSelect","element","createElement","i18n","__","wp","$caf7cfe3bd8cad6b$export$2e2bcd8739ae039","_ref","type","icon","label","bpAttachments","allowedExtByMediaList","select","getEditorSettings","allowedTypes","album","uploadMedia","files","media","currentTarget","$caf7cfe3bd8cad6b$var$createElement","$caf7cfe3bd8cad6b$var$Placeholder","$caf7cfe3bd8cad6b$var$DropZone","onFilesDrop","className","$caf7cfe3bd8cad6b$var$FormFileUpload","onChange","multiple","accept","blockEditor","useBlockProps","$d70e294af7f90b98$export$2e2bcd8739ae039","attributes","setAttributes","$d70e294af7f90b98$var$createElement","blocks","registerBlockType","metadata","title","description","background","foreground","src","category","keywords","link","supports","align","alignWide","anchor","html","edit","editImage","save"],"version":3,"file":"index.js.map"}