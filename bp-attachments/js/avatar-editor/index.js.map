{"mappings":"YAGA,MACCA,YAAYC,SACXA,EADWC,eAEXA,GAEDC,SAASC,cACRA,GAEDC,MAAMC,GACLA,IAEEC,G,IA+BJC,EA1B6BC,IAAqC,IAAnCC,SAAEA,EAAFC,gBAAYA,GAAZF,EAC9B,MAAMG,gBAAEA,GAAoBF,EAE5B,OACCG,EADD,OACMC,UAAU,8BACdD,EAACE,EADF,CAEEC,MAAQV,EAAI,wBAAyB,kBACrCW,YAAgBC,GAAWP,EAAiBO,GAC5CJ,UAAU,oBAEXD,EALA,OAKKC,UAAU,kBACdD,EADD,MACKC,UAAU,yCAA0CR,EAAI,qBAAsB,mBAClFO,EADA,KACGC,UAAU,yCAA0CR,EAAI,KAAM,mBACjEO,EAACM,EADD,CAECC,SAAaF,GAAWP,EAAiBO,GACzCG,UAAW,EACXC,OAAS,IAAMV,EAAgBW,KAAM,OACrCT,UAAU,8BAERR,EAAI,kBAAmB,sBCnC9B,MAAMkB,SACLA,EACAC,MAAMC,cACLA,GAHIC,SAKLA,EACAxB,SAASC,cACRA,EADQwB,OAERA,EAFQC,SAGRA,GAEDxB,MAAMC,GACLA,IAEEC,GAOEuB,EAAerB,IAAoB,IAAlBC,SAAEA,GAAFD,EACtB,MAAQsB,EAAaC,GAAmBH,EAAU,WAC1CI,EAAaC,GAAmBL,EAAU,IA0BlD,OAAKI,EAEHE,EADD,OACMC,IAAMH,IAIR,WAAaF,EAEhBI,EAAC3B,EADF,CACuBE,SAAWA,EAAWC,gBAhCxBO,IACrB,IAAImB,EAGHA,EADInB,EAAMoB,eAAiBpB,EAAMoB,cAAcpB,MACvC,IAAKA,EAAMoB,cAAcpB,OAEzBA,EAGT,MAAMqB,EAASb,EAAeW,EAAM,IACpCH,EAAgBK,WAoBjB,GAODZ,GAAU,WACT,MAAMjB,EAAW8B,OAAOC,mCAAqC,GAC7Db,EAAQO,EAACO,EAATd,CAAsBlB,SAAWA,IAAciC,SAASC,cAAe,8B","sources":["src/avatar-editor/elements/uploader.js","src/avatar-editor/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nconst {\n\tcomponents: {\n\t\tDropZone,\n\t\tFormFileUpload,\n\t},\n\telement: {\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * File Uploader element.\n */\nconst AvatarEditorUploader = ( { settings, onSelectedImage } ) => {\n\tconst { allowedExtTypes } = settings;\n\n\treturn (\n\t\t<div className=\"uploader-container enabled\">\n\t\t\t<DropZone\n\t\t\t\tlabel={ __( 'Drop your image here.', 'bp-attachments' ) }\n\t\t\t\tonFilesDrop={ ( files ) => onSelectedImage( files ) }\n\t\t\t\tclassName=\"uploader-inline\"\n\t\t\t/>\n\t\t\t<div className=\"dropzone-label\">\n\t\t\t\t<h2 className=\"upload-instructions drop-instructions\">{ __( 'Drop an image here', 'bp-attachments' ) }</h2>\n\t\t\t\t<p className=\"upload-instructions drop-instructions\">{ __( 'or', 'bp-attachments' ) }</p>\n\t\t\t\t<FormFileUpload\n\t\t\t\t\tonChange={ ( files ) => onSelectedImage( files ) }\n\t\t\t\t\tmultiple={ false }\n\t\t\t\t\taccept={ '.' + allowedExtTypes.join( ', .' ) }\n\t\t\t\t\tclassName=\"browser button button-hero\"\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Select an image', 'bp-attachments' ) }\n\t\t\t\t</FormFileUpload>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AvatarEditorUploader;\n","/**\n * WordPress dependencies\n */\nconst {\n\tapiFetch,\n\tblob: {\n\t\tcreateBlobURL,\n\t},\n\tdomReady,\n\telement: {\n\t\tcreateElement,\n\t\trender,\n\t\tuseState,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport AvatarEditorUploader from './elements/uploader';\n\nconst AvatarEditor = ( { settings } ) => {\n\tconst [ currentStep, setCurrentStep ] = useState( 'upload' );\n\tconst [ currentBlob, setCurrentBlob ] = useState( '' );\n\n\tconst uploadImage = ( files ) => {\n\t\tlet image;\n\n\t\tif ( files.currentTarget && files.currentTarget.files ) {\n\t\t\timage = [ ...files.currentTarget.files ];\n\t\t} else {\n\t\t\timage = files;\n\t\t}\n\n\t\tconst imgSrc = createBlobURL( image[0] );\n\t\tsetCurrentBlob( imgSrc );\n\t\t/*imageBlob = (\n\t\t\t<img src={ imgSrc } />\n\t\t);\n\n\t\tconsole.log( imageBlob );\n\n\t\tsetCurrentStep( 'uploading' );\n\n\t\t/*media.forEach( ( medium ) => {\n\t\t\tcreateMedium( medium );\n\t\t} );*/\n\t};\n\n\tif ( currentBlob ) {\n\t\treturn (\n\t\t\t<img src={ currentBlob } />\n\t\t);\n\t}\n\n\tif ( 'upload' === currentStep ) {\n\t\treturn (\n\t\t\t<AvatarEditorUploader settings={ settings } onSelectedImage={ uploadImage }/>\n\t\t);\n\t}\n};\n\ndomReady( function() {\n\tconst settings = window.bpAttachmentsAvatarEditorSettings || {};\n\trender( <AvatarEditor settings={ settings }/>, document.querySelector( '#bp-avatar-placeholder' ) );\n} );\n"],"names":["components","DropZone","FormFileUpload","element","createElement","i18n","__","wp","$902e7d8adf34f1c9$export$2e2bcd8739ae039","_ref","settings","onSelectedImage","allowedExtTypes","$902e7d8adf34f1c9$var$createElement","className","$902e7d8adf34f1c9$var$DropZone","label","onFilesDrop","files","$902e7d8adf34f1c9$var$FormFileUpload","onChange","multiple","accept","join","apiFetch","blob","createBlobURL","domReady","render","useState","AvatarEditor","currentStep","setCurrentStep","currentBlob","setCurrentBlob","$b08237e449bd13c6$var$createElement","src","image","currentTarget","imgSrc","window","bpAttachmentsAvatarEditorSettings","$b08237e449bd13c6$var$AvatarEditor","document","querySelector"],"version":3,"file":"index.js.map"}