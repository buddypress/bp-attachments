!function(){const{domReady:t}=wp;window.bp=window.bp||{},window.bp.Attachments=window.bp.Attachments||{};const e=window.bpAttachmentsActivitySettings||{};window.bp.Attachments.Activity=new class{getFileInput(){let t;return document.querySelector("#bp-attachments-activity-file")?t=document.querySelector("#bp-attachments-activity-file"):(t=document.createElement("input"),t.type="file",t.id="bp-attachments-activity-file",t.name="_bp_attachments_activity_file",t.style="display: none;",t.accept=this.allowedTypes,this.container.append(t)),t}upload(t,e){const{model:{attributes:{user_id:n}}}=t;e.addEventListener("change",(t=>{const e=t.target.files[0];if(e){const t=new FormData;t.append("file",e),t.append("action","bp_attachments_media_upload"),t.append("object","members"),t.append("object_item",n),t.append("visibility","public"),t.append("total_bytes",e.size),fetch(this.endpoint,{method:"POST",body:t,headers:{"X-WP-Nonce":this.nonce}}).then((t=>t.json())).then((t=>{console.log(t)})).catch((t=>{console.log(t)}))}})),e.click()}start(){const t=this.getFileInput();this.ActivityButtons.on("display:bpAttachments",(e=>this.upload(e,t)))}constructor({path:t,root:e,nonce:n,allowedExtTypes:i}){const{bp:{Nouveau:{Activity:{postForm:{buttons:o}}}}}=window;this.ActivityButtons=o,this.container=document.querySelector("#whats-new-textarea"),this.endpoint=e+t,this.nonce=n,this.allowedTypes=i}}(e),t((()=>window.bp.Attachments.Activity.start()))}();
//# sourceMappingURL=activity.js.map
